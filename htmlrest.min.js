"use strict";var jsns=function(){function t(t){return void 0!==s[t]}function e(t){return void 0!==u[t]}function n(t){var e=i(u[t]);return e&&delete u[t],e}function r(){this.exports={}}function i(i){for(var o=i.dependencies,a=!0,u=0;u<o.length;++u){var l=o[u];l.loaded=t(l.name),!l.loaded&&e(l.name)&&(l.loaded=n(l.name)),a=a&&l.loaded}if(a){var c=new r;i.name&&(s[i.name]=c);for(var f=[c.exports,c],u=0;u<o.length;++u){var l=o[u];f.push(s[l.name].exports)}i.factory.apply(c,f)}return a}function o(e,n,r){if(this.name=e,this.factory=r,this.dependencies=[],n)for(var i=0;i<n.length;++i){var o=n[i];this.dependencies.push({name:o,loaded:t(o)})}}function a(){for(var t=0;t<l.length;++t){var e=l[t];i(e)&&l.splice(t--,1)}}var s={},u={},l=[];return{run:function(t,e){l.push(new o(null,t,e)),a()},define:function(t,e,n){u[t]=new o(t,e,n),a()},debug:function(){if(l.length>0)for(var e=0;e<l.length;++e){var n=l[e];console.log("Runner waiting "+n);for(var r=0;r<n.dependencies.length;++r){var i=n.dependencies[r];t(i.name)||console.log("  dependency "+i.name)}}else console.log("No runners remaining.")}}}();!function(){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1})}(),jsns.define("htmlrest.bindingcollection",["htmlrest.escape","htmlrest.typeidentifiers","htmlrest.domquery","htmlrest.textstream","htmlrest.toggles","htmlrest.models"],function(t,e,n,r,i,o,a,s){function u(t,e){this.execute=function(n){var r=e[t];r&&r.call(this,n)}}function l(t,e){for(var n=0;n<t.length;++n){var r=t[n];i.iterateNodes(r,NodeFilter.SHOW_ELEMENT,function(t){for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n];if(r.name.startsWith("data-hr-on-")){var i=r.value;if(e[i]){var o=new u(i,e);t.addEventListener(r.name.substr(11),o.execute)}}}})}}function c(t,e,n,r){var o=r[t];if(void 0===o)for(var s="[data-hr-toggle="+t+"]",u=0;u<e.length;++u){var l=e[u],c=i.first(s,l);if(c)return o=a.build(c,n),r[t]=o,o;o=null}return null===o&&(o=a.build(null,n)),o}function f(t,e,n){var r=n[t];if(void 0===r)for(var o="[data-hr-model="+t+"]",a=0;a<e.length;++a){var u=e[a],l=i.first(o,u);if(l)return r=s.build(l),n[t]=r,r;r=null}return null===r&&(r=new s.NullModel),r}function h(t){for(var e={},n=0;n<t.length;++n){var r=t[n];i.iterateNodes(r,NodeFilter.SHOW_ELEMENT,function(t){for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n];r.name.startsWith("data-hr-config-")&&(e[r.name.substr(15)]=r.value)}})}return e}function d(t){t=i.all(t);var e=void 0,n=void 0,r=void 0;this.setListener=function(e){l(t,e)},this.setData=function(n){e=bindData(n,t,e)},this.getToggle=function(e,r){return void 0===n&&(n={}),c(e,t,r,n)},this.getModel=function(e){return void 0===r&&(r={}),f(e,t,r)},this.getConfig=function(){return h(t)}}e.exports=d}),jsns.run(["htmlrest.domquery","htmlrest.bindingcollection","htmlrest.textstream","htmlrest.components"],function(t,e,n,r,i,o){function a(t,e,n,i){for(var o=e.format(t),a=m(o),s=[],u=0;u<a.length;++u){var l=a[u];n.insertBefore(l,i),s.push(l)}return new r(s)}function s(t){function e(e,r,a){return o=new i(t),s=n,n(e,r,a)}function n(t,e,n){return a(t,o,e,n)}function r(t,e,n){return s(t,e,n)}var o,s=e;this.create=r}function u(t){function e(e,r,o){return s=new i(t),l=n,n(e,r,o)}function n(t,e,n){return a(t,s,e,n)}function r(t,e,n){return l(t,e,n)}function o(t,e){u[t]=e}var s,u={},l=e;this.create=r,this.addVariant=o}function l(t,e){var n=t;if(c){var n=document.createElement("div");n.appendChild(document.importNode(t.content,!0))}for(var r=n.getElementsByTagName("TEMPLATE");r.length>0;)var e=l(r[0],e);var i=n.innerHTML.trim();if(1===n.childElementCount&&"TABLE"===n.firstElementChild.tagName&&!t.hasAttribute("data-hr-keep-table")){var a=n.firstElementChild;i=a.childElementCount>0&&"TBODY"===a.firstElementChild.tagName?a.firstElementChild.innerHTML.trim():a.innerHTML.trim()}var h=t.parentNode;h.removeChild(t);var d=t.getAttribute("data-hr-variant");if(null===d){var m=t.getAttribute("data-hr-component");null===m&&(m="AnonTemplate_"+f++,h.setAttribute("data-hr-model-component",m));var v=new u(i);return o.register(m,v.create),v}return void 0!==e?e.addVariant(d,new s(i)):console.log('Attempted to create a variant named "'+d+'" with no default component in the chain. Please start your template element chain with a data-hr-component or a anonymous template. This template has been ignored.'),e}for(var c=("content"in document.createElement("template")),f=0,h=document.getElementsByTagName("TEMPLATE");h.length>0;)var d=l(h[0],d);var m=function(t){var e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],body:[0,"",""],_default:[1,"<div>","</div>"]};e.optgroup=e.option,e.tbody=e.tfoot=e.colgroup=e.caption=e.thead,e.th=e.td;var n=/<\s*\w.*?>/g.exec(t),r=document.createElement("div");if(null!=n){var r,i=n[0].replace(/</g,"").replace(/>/g,"").split(" ")[0],o=e[i]||e._default;t=o[1]+t+o[2],r.innerHTML=t;for(var a=o[0];a--;)r=r.lastChild}else r.innerHTML=t;return r.childNodes}}),jsns.define("htmlrest.components",["htmlrest.typeidentifiers","htmlrest.domquery"],function(t,e,n,r){function i(t,e,n,r){return u(t,n,e,null,r)}function o(t,e){l[t]=e}function a(t,e,r,i){for(var o=null,o=e.firstElementChild;null!=o&&!o.hasAttribute("data-hr-insert");)o=o.nextElementSibling;var a=document.createDocumentFragment();if(Array.isArray(r))for(var s=0;s<r.length;++s)u(t,r[s],a,null,i);else if(n.isFunction(r))for(var l=r();null!=l;)u(t,l,a,null,i),l=r();else if(n.isObject(r))for(var c in r)u(t,r[c],a,null,i);e.insertBefore(a,o)}function s(t){t=r.first(t);for(var e=t.firstChild,n=null;null!=e;)n=e.nextSibling,1===e.nodeType&&e.hasAttribute("data-hr-keep")||t.removeChild(e),e=n}function u(t,e,n,i,o){if(n=r.first(n),l.hasOwnProperty(t)){var a=l[t](e,n,i);return void 0!==o&&o(a,e),a}console.log("Failed to create component '"+t+"', cannot find factory, did you forget to define it on the page?")}var l={};t.single=i,t.register=o,t.repeat=a,t.empty=s}),jsns.define("htmlrest.controller",["htmlrest.bindingcollection","htmlrest.domquery"],function(t,e,n,r){function i(t,e,i){r.iterate('[data-hr-controller="'+t+'"]',null,function(t){var r=new n(t),o=new e(r,i,null);r.setListener(o),t.removeAttribute("data-hr-controller")})}function o(t,e){return function(n,r){var i=new t(n,e,r);n.setListener(i)}}t.create=i,t.createOnCallback=o}),jsns.define("htmlrest.domquery",["htmlrest.typeidentifiers"],function(t,e,n){function r(t,e){return n.isString(t)&&(t=void 0!==e?this.matches(e,t)?e:e.querySelector(t):document.querySelector(t)),t}function i(t,e,r){if(n.isString(t))void 0===r&&(r=[]),void 0!==e?this.matches(e,t)?r.push(e):l(e.querySelectorAll(t),r):l(document.querySelectorAll(t),r);else if(n.isArray(t))if(void 0===r)r=t;else for(var i=0;i<t.length;++i)r.push(t[i]);else void 0===r?r=[t]:r.push(t);return r}function o(t,e,r){if(n.isString(t))e?this.matches(e,t)?r(e):c(e.querySelectorAll(t),r):c(document.querySelectorAll(t),r);else if(n.isArray(t))for(var i=0;i<t.length;++i)r(t[i]);else r(t)}function a(t){return!0}function s(t,e,n){for(var r,i=document.createNodeIterator(t,e,a,!1);r=i.nextNode();)n(r)}function u(t,e){return t.matches(e)}function l(t,e){for(var n=0;n<t.length;++n)e.push(t[n])}function c(t,e){for(var n=0;n<t.length;++n)e(t[n])}t.first=r,t.all=i,t.iterate=o,t.iterateNodes=s,t.matches=u}),jsns.define("htmlrest.escape",null,function(t,e){function n(t){t=String(t);for(var e={textStart:0,bracketStart:0,output:""},n=0;n<t.length;++n)switch(t[n]){case"<":r(n,t,e,"&lt;");break;case">":r(n,t,e,"&gt;");break;case'"':r(n,t,e,"&quot;");break;case"'":r(n,t,e,"&#39;")}return e.textStart<t.length&&(e.output+=t.substring(e.textStart,t.length)),e.output}function r(t,e,n,r){n.bracketStart=t,n.output+=e.substring(n.textStart,n.bracketStart)+r,n.textStart=t+1}e.exports=n}),jsns.define("htmlrest.eventhandler",null,function(t,e){function n(){function t(t,e){r.push({handler:e,context:t})}function e(t,e){for(var n=0;n<r.length;++n)r[n].handler===e&&r[n].context===t&&r.splice(n--,1)}function n(){for(var t=0;t<r.length;++t){var e=r[t];e.handler.apply(e.context,arguments)}}var r=[];this.modifier={add:t,remove:e},this.fire=n}e.exports=n}),jsns.define("htmlrest.form",["htmlrest.domquery"],function(t,e,n){function r(t){if(t=n.first(t),t&&"FORM"===t.nodeName){var e,r,i={};for(e=t.elements.length-1;e>=0;e-=1)if(""!==t.elements[e].name)switch(t.elements[e].nodeName){case"INPUT":switch(t.elements[e].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":case"file":i[t.elements[e].name]=t.elements[e].value;break;case"checkbox":case"radio":t.elements[e].checked&&(i[t.elements[e].name]=t.elements[e].value)}break;case"TEXTAREA":i[t.elements[e].name]=t.elements[e].value;break;case"SELECT":switch(t.elements[e].type){case"select-one":i[t.elements[e].name]=t.elements[e].value;break;case"select-multiple":for(r=t.elements[e].options.length-1;r>=0;r-=1)t.elements[e].options[r].selected&&(i[t.elements[e].name]=t.elements[e].options[r].value)}break;case"BUTTON":switch(t.elements[e].type){case"reset":case"submit":case"button":i[t.elements[e].name]=t.elements[e].value}}return i}}function i(t,e){t=n.first(t);for(var r=n.all("[name]",t),i=0;i<r.length;++i){var o=r[i];o.value=e[o.getAttribute("name")]}}t.serialize=r,t.populate=i}),jsns.define("htmlrest.formlifecycle",["htmlrest.toggles","htmlrest.rest"],function(t,e,n,r){function i(t){var e=null,i=this;t.setListener({submit:function(t){t.preventDefault(),i.submit()},tryAgain:function(t){t.preventDefault(),e()}});var o=t.getToggle("load"),a=t.getToggle("main"),s=t.getToggle("fail"),u=new n.Group(o,a,s),l=t.getModel("settings");this.populate=function(){u.show(o),r.get(l.getSrc(),function(t){l.setData(t),u.show(a)},function(t){e=i.populate,u.show(s)})},this.submit=function(){u.show(o);var t=l.getData();r.post(l.getSrc(),t,function(t){u.show(a)},function(t){e=i.submit,u.show(s)})}}e.exports=i}),jsns.define("htmlrest.iter",null,function(t,e){function n(t,e){var n=0;return function(){return n<t.length?e(t[n++]):null}}e.exports=n}),jsns.define("htmlrest.models",["htmlrest.form","htmlrest.textstream","htmlrest.components","htmlrest.typeidentifiers","htmlrest.domquery"],function(t,e,n,r,i,o,a){function s(t,e){this.setData=function(e){n.populate(t,e)},this.appendData=this.setData,this.getData=function(){return n.serialize(t)},this.getSrc=function(){return e}}function u(t,e,n){this.setData=function(e,n){i.empty(t),this.appendData(e,n)},this.appendData=function(e,r){o.isArray(e)||o.isFunction(e)?i.repeat(n,t,e,r):e&&i.single(n,t,e,r)},this.getData=function(){return{}},this.getSrc=function(){return e}}function l(t,e){var n=void 0;this.setData=function(e){n=c(e,t,n)},this.appendData=this.setData,this.getData=function(){return{}},this.getSrc=function(){return e}}function c(t,e,n){if(void 0===n)n=[],a.iterateNodes(e,NodeFilter.SHOW_TEXT,function(e){var i=new r(e.textContent);i.foundVariable()&&(e.textContent=i.format(t),n.push({node:e,stream:i}))});else for(var i=0;i<n.length;++i){var o=n[i];o.node.textContent=o.stream.format(t)}return n}function f(t){var e=t.getAttribute("data-hr-model-src");if("FORM"===t.nodeName)return new s(t,e);var n=t.getAttribute("data-hr-model-component");return n?new u(t,e,n):new l(t,e)}function h(){this.setData=function(t){},this.appendData=this.setData,this.getData=function(){return{}},this.getSrc=function(){return""}}t.build=f,t.NullModel=h}),jsns.define("htmlrest.rest",null,function(t,e){function n(t,e,n){if(200===t.status){if(void 0!==e){var r=void 0;try{r=JSON.parse(t.response)}catch(i){r=t.response}e(r)}}else if(void 0!==n){try{r=JSON.parse(t.response)}catch(i){r=t.response}n(r)}}function r(t,e,n,r){s(t,"POST",e,n,r)}function i(t,e,n,r){s(t,"PUT",e,n,r)}function o(t,e,n,r){s(t,"DELETE",e,n,r)}function a(t,e,r,i){void 0===r&&(r=e),(void 0===i||i===!1)&&(t+=t.indexOf("?")>-1?"&":"?",t+="noCache="+(new Date).getTime());var o=new XMLHttpRequest;o.open("GET",t),o.onload=function(){n(o,e,r)},o.send()}function s(t,e,r,i,o){void 0===o&&(o=i);var a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){n(a,i,o)},a.send(JSON.stringify(r))}function u(t,e,r,i){void 0===i&&(i=r);var o=null;e instanceof FormData?o=e:(o=new FormData,o.append("file",e));var a=new XMLHttpRequest;a.open("POST",t),a.onload=function(){n(a,r,i)},a.send(o)}t.post=r,t.put=i,t["delete"]=o,t.get=a,t.ajax=s,t.upload=u}),jsns.define("htmlrest.storage",null,function(t,e){function n(t,e){void 0===e&&(e=null);var n=sessionStorage.getItem(t);return n=null!==n?JSON.parse(n):e}function r(t,e){sessionStorage.setItem(t,JSON.stringify(e))}function i(t,e){return a.hasOwnProperty(t)?a[t]:(void 0!==e&&this.storeInInstance(t,e),e)}function o(t,e){a[t]=e}var a={};t.getSessionJson=n,t.storeJsonInSession=r,t.getInInstance=i,t.storeInInstance=o}),jsns.define("htmlrest.textstream",["htmlrest.escape","htmlrest.typeidentifiers"],function(t,e,n,r){function i(t){this.writeObject=function(e){return t},this.writeFunction=this.writeObject}function o(t){this.writeObject=function(e){return n(e[t])},this.writeFunction=function(e){return n(e(t))}}function a(){this.writeObject=function(t){return n(t)},this.writeFunction=function(t){return n(t("this"))}}function s(t,e){(null===t||void 0===t)&&(t={});var n="";if(r.isFunction(t))for(var i=0;i<e.length;++i)n+=e[i].writeFunction(t);else for(var i=0;i<e.length;++i)n+=e[i].writeObject(t);return n}function u(t){for(var e=[],n=!1,r=0,u=0,l=0,c=0;c<t.length;++c)switch(t[c]){case"{":"{"!==t[c+1]&&(u=c);break;case"}":if((c+1===t.length||"}"!==t[c+1])&&(l=c,l-1>u)){e.push(new i(t.substring(r,u)));var f=t.substring(u+1,l);e.push("this"===f?new a:new o(f)),r=c+1,n=!0}}r<t.length&&e.push(new i(t.substring(r,t.length))),this.format=function(t){return s(t,e)},this.foundVariable=function(){return n}}e.exports=u}),jsns.define("htmlrest.toggles",["htmlrest.typeidentifiers"],function(t,e,n){function r(t){m.push(t)}function i(t,e){if(t){var n=t[e];if(n)n();else{var r=t.applyState(null);i(r,e)}}}function o(t,e,n){function r(){var r=n.applyState(e);i(r,t)}n[t]=r}function a(t){function e(e){return t}this.applyState=e}function s(t,e){function n(n){return t.style.cssText=n?r+n:r,e}var r=t.style.cssText||"";this.applyState=n}function u(t,e){function n(n){return n?t.setAttribute("class",o+" "+n):t.setAttribute("class",o),r(),e}function r(){a&&(t.classList.remove(a),t.removeEventListener("transitionend",i),t.removeEventListener("animationend",i),t.addEventListener("transitionend",i),t.addEventListener("animationend",i))}function i(){t.removeEventListener("transitionend",i),t.removeEventListener("animationend",i),t.classList.add(a)}var o=t.getAttribute("class")||"",a=t.getAttribute("data-hr-class-idle");this.applyState=n}function l(){function t(t){n.push(t)}function e(t,e,r){void 0===e&&(e="on"),void 0===r&&(r="off");for(var o=0;o<n.length;++o)i(n[o],r);i(t,e)}for(var n=[],r=0;r<arguments.length;++r)n.push(arguments[r]);this.add=t,this.activate=e,this.show=e}function c(t,e,n,r,i){for(var a=null,s=0;s<e.length;++s){var u=e[s],l=n+u;if(t.hasAttribute(l)){var c=t.getAttribute(l);null===a&&(a=new r(t,i)),o(u,c,a)}}return a?a:i}function f(t,e){void 0===e&&(e=d);var r=null;if(null!==t){r=c(t,e,"data-hr-style-",s,r),r=c(t,e,"data-hr-class-",u,r);for(var i=0;i<m.length;++i)r=m[i](t,e,r)}for(null===r&&(r=new a(r)),i=0;i<e.length;++i){var l=e[i];n.isFunction(r[l])||o(l,null,r)}return r}function h(t){return n.isObject(t)&&t.constructor.prototype==a.prototype}var d=["on","off"],m=[];t.addTogglePlugin=r,t.Group=l,t.build=f,t.isNullToggle=h}),jsns.define("htmlrest.typeidentifiers",null,function(t,e){function n(t){return Array.isArray(t)}function r(t){return"string"==typeof t}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t}"undefined"==typeof Array.isArray&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),t.isArray=n,t.isString=r,t.isFunction=i,t.isObject=o}),jsns.run(["htmlrest.toggles"],function(t,e,n){function r(t,e){function n(){return o.open(),e}function r(){return o.close(),e}function i(t){return e}var o=new Modal(t);this.on=n,this.off=r,this.applyState=i}n.addTogglePlugin(function(t,e,n){return t.classList.contains("modal")&&(n=new r(t,n)),n})}),jsns.define("htmlrest.widgets.navmenu",["htmlrest.eventhandler","htmlrest.controller"],function(t,e,n,r){function i(){function t(t,e){void 0!==e&&(e=r.createOnCallback(e));var n={name:t,created:e};i.push(n),o.fire(n)}function e(){return i}var i=[],o=new n;this.itemAdded=o.modifier,this.add=t,this.getItems=e}function o(t){var e=a[t];return void 0===e&&(a[t]=e=new i),e}var a={};t.getNavMenu=o}),jsns.define("htmlrest.widgets.pagenumbers",["htmlrest.toggles","htmlrest.eventhandler"],function(t,e,n,r){function i(t,e){function i(t){v.fire(t)}function o(t){return function(){i(p+t)}}function a(){var t=g.currentPage+1;f>t&&i(t)}function s(){var t=g.currentPage-1;t>=0&&i(t)}function u(){for(var t={previousPage:function(t){t.preventDefault(),s()},nextPage:function(t){t.preventDefault(),a()}},r=["on","off","active"],i=0,u="page"+i,l=e.getToggle(u,r);!n.isNullToggle(l);)c.push(l),h.add(l),t[u]=o(i),u="page"+ ++i,l=e.getToggle(u,r);e.setListener(t)}function l(){f=Math.floor(this.totalResults/this.resultsPerPage),this.totalResults%this.resultsPerPage!==0&&++f;var e,n=0;e=this.currentPage+m>f?f-d:this.currentPage-m,0>e&&(e=0),p=e,t.setData(function(t){return e===g.currentPage&&h.activate(c[n],"active","on"),e>=f&&c[n].off(),++n,e++ +1})}var c=[],f=0,h=new n.Group;u();var d=c.length,m=Math.floor(d/2),v=new r;this.pageChangeRequested=v.modifier;var p=0,g=this;this.currentPage=0,this.totalResults=0,this.resultsPerPage=0,this.updatePages=l}e.exports=i}),jsns.define("htmlrest.data.paged",["htmlrest.rest","htmlrest.eventhandler"],function(t,e,n,r){function i(t,e){function i(){o.fire();var e=t+"?page="+this.currentPage+"&count="+this.resultsPerPage;n.get(e,function(t){a.fire(t)},function(t){loadError.fire(t)})}var o=new r;this.updating=o.modifier;var a=new r;this.updated=a.modifier;var s=new r;this.error=s.modifier,this.resultsPerPage=e,this.currentPage=0,this.updateData=i}e.exports=i});
//# sourceMappingURL=htmlrest.min.js.map
